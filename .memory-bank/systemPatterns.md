# システムパターン: MCP Servers

## 【システムアーキテクチャ】「システムの全体構造」

### MCPサーバー管理アーキテクチャ
```
[IDE/Cursor] ←→ [MCP Protocol] ←→ [各種MCPサーバー]
     ↓               ↓                  ↓
[設定ファイル]   [通信チャネル]      [外部サービス]
(.cursor/mcp.json) (stdio/SSE)    (GitHub/Supabase等)
```

### 【デザインパターン】「設計の型」

#### 1. **設定パターン**
- **絶対パス設定**: 安定性確保のためフルパス指定
- **環境分離**: 開発環境と本番環境の設定分離
- **フォールバック**: npx失敗時の代替手段

#### 2. **トラブルシューティングパターン**
- **段階的診断**: 環境→依存関係→設定→実行の順
- **キャッシュクリア**: 問題発生時の初期対応
- **パス検証**: 実行前のファイル存在確認

## コンポーネント間の関係

### 【依存関係】「コンポーネント関係」
- **Cursor** → **MCP Protocol** → **各サーバー**
- **Node.js** → **npm packages** → **実行可能ファイル**
- **設定ファイル** → **実行時パラメータ** → **サーバー起動**

### 【通信フロー】「データの流れ」
1. **Cursor起動** → 設定ファイル読み込み
2. **MCPサーバー起動** → 通信チャネル確立
3. **ツール実行** → 外部サービス連携
4. **結果返却** → Cursor画面表示

## 重要な技術的決定事項

### Playwright MCP Server設定
- **実行方式**: npx ではなく Node.js 直接実行
- **パス設定**: 相対パスではなく絶対パス指定
- **依存関係**: グローバルインストール必須 