# メモリサーバー利用ガイド

## 概要

メモリサーバー（Memory Server）は、AIアシスタントが会話やプロジェクト情報を長期的に記憶するための仕組みを提供します。ナレッジグラフを活用して、プロジェクト、技術、関係性などの情報を構造化して保存し、必要なときに参照できます。

## サーバーの起動方法

メモリサーバーは以下のいずれかの方法で起動できます：

### 1. npm startコマンドを使用する場合
```bash
cd /c/develop/mcp-servers/mcp-servers/memory-server
npm start
```

### 2. Node.js スクリプトを使用する場合
```bash
cd /c/develop/mcp-servers/mcp-servers/memory-server
node run-memory.js
```

### 3. シェルスクリプトを使用する場合
```bash
cd /c/develop/mcp-servers/mcp-servers/memory-server
./start-server.sh
```

正常に起動すると、以下のメッセージが表示されます：
```
Knowledge Graph MCP Server running on stdio
```

## 設定ファイル

メモリサーバーは `config.json` ファイルを使用して設定されています：

```json
{
  "mcpServers": {
    "memory": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-memory"
      ],
      "env": {
        "MEMORY_FILE_PATH": "./memory.json"
      }
    }
  }
}
```

記憶データは `memory.json` ファイルに保存されます。

## 利用可能なAPIコマンド

メモリサーバーでは以下のAPIコマンドが利用可能です：

1. **create_entities**: 新しいエンティティを作成
2. **create_relations**: エンティティ間の関係を作成
3. **add_observations**: 既存エンティティに観察事項を追加
4. **delete_entities**: エンティティを削除
5. **delete_observations**: 特定の観察事項を削除
6. **delete_relations**: エンティティ間の関係を削除
7. **read_graph**: ナレッジグラフ全体を読み取り
8. **search_nodes**: キーワードでノードを検索
9. **open_nodes**: 特定のノードの詳細情報を取得

## 明示的な記憶の保存方法

AIアシスタントに明示的に情報を記憶させたい場合は、以下のような表現を使用します：

### 基本的な呼びかけ方

1. **直接的な指示**
   ```
   「この情報を記憶してください：[情報内容]」
   「このプロジェクト情報を保存してください：[プロジェクト詳細]」
   「以下の技術スタックを覚えておいてください：[技術リスト]」
   ```

2. **エンティティ作成の指示**
   ```
   「新しいプロジェクト "SampleApp" について記憶してください。これはPythonで開発するWebアプリケーションです」
   「"React" という技術エンティティを作成して、これはフロントエンドフレームワークであることを記録してください」
   ```

3. **関係性の記録指示**
   ```
   「"SampleApp" プロジェクトは "React" と "Node.js" を使用していることを記録してください」
   「"BackendAPI" と "FrontendApp" が連携していることを関係として保存してください」
   ```

4. **具体的な観察事項の追加**
   ```
   「"SampleApp" プロジェクトについて、以下の情報を追加してください：
    - 開発チームは3名
    - デプロイ先はAWS
    - 締め切りは2024年6月末」
   ```

### より効果的な呼びかけ例

```
「重要な情報です。"ECommerceApp" プロジェクトについて以下を記憶してください：
- プロジェクト種別：ECサイト
- 技術スタック：Next.js, Prisma, PostgreSQL
- デプロイ環境：Vercel
- 主要機能：商品検索、カート、決済処理
- セキュリティ要件：PCI DSS準拠必須

また、このプロジェクトは "CorporateSite" プロジェクトと認証システムを共有していることも記録してください」
```

## 実践的な使用例

### 例1: 新しいプロジェクトの記録
```
「新しいプロジェクト "DataAnalysisTool" について記憶してください：
- 目的：社内データ分析ツール開発
- 開始日：2024年4月1日
- 技術スタック：Python, Pandas, Dash
- チーム規模：3名
- 主要機能：データ可視化、レポート生成、予測分析」
```

### 例2: 複数プロジェクト間の関係性の記録
```
「"WebApp" プロジェクトと "MobileApp" プロジェクトは同じバックエンドAPIを共有していることを記録してください。
また、両方とも認証には "Auth0" を使用しています。
ただし、フロントエンドは "WebApp" がReactを使用しているのに対し、"MobileApp" はFlutterを使用しています。」
```

### 例3: 技術的な意思決定の記録
```
「"WebApp" プロジェクトでGraphQLを採用した理由を記録してください：
- クライアント側で必要なデータのみを取得可能
- オーバーフェッチの防止
- 型安全性の確保
- フロントエンド開発の効率化
この決定は2024年2月のアーキテクチャ会議で承認されました。」
```

## ベストプラクティス

1. **構造化された情報提供**: 箇条書きや明確なカテゴリ分けをして情報を提供する
2. **関連性の明示**: 複数のエンティティ間の関係を明示的に伝える
3. **重要度の指定**: 特に重要な情報には「重要」「必ず覚えておいてください」などと強調する
4. **定期的な確認**: 「〜に関する記憶を確認してください」と定期的に確認する
5. **コンテキスト維持**: 関連するプロジェクトや技術を一緒に言及する

## トラブルシューティング

1. **メモリサーバーが応答しない場合**:
   - サーバーが正しく起動しているか確認する
   - `npm start` コマンドを再実行する

2. **記憶が保存されていない場合**:
   - `memory.json` ファイルが存在するか確認する
   - 明示的な記憶指示を使用したか確認する

3. **プロジェクト間の切り替えがうまくいかない場合**:
   - プロジェクト名を明示的に言及する
   - 「〜プロジェクトについて話しています」と明確に伝える 